<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>java8 - tag - Arif Pehlivan</title>
        <link>http://mrpehlivan.github.io/tags/java8/</link>
        <description>java8 - tag - Arif Pehlivan</description>
        <generator>Hugo -- gohugo.io</generator><language>tr</language><managingEditor>m.arifpehlivan@gmail.com (Arif Pehlivan)</managingEditor>
            <webMaster>m.arifpehlivan@gmail.com (Arif Pehlivan)</webMaster><lastBuildDate>Sun, 18 Feb 2018 00:00:00 &#43;0000</lastBuildDate><atom:link href="http://mrpehlivan.github.io/tags/java8/" rel="self" type="application/rss+xml" /><item>
    <title>Nedir bu Java Stream?</title>
    <link>http://mrpehlivan.github.io/posts/stream/</link>
    <pubDate>Sun, 18 Feb 2018 00:00:00 &#43;0000</pubDate>
    <author></author>
    <guid>http://mrpehlivan.github.io/posts/stream/</guid>
    <description><![CDATA[<p>Stream kelimesini ilk duyduÄŸum zaman aklÄ±ma <strong>Java I/O</strong> paketinde
bulunan <strong>InputStream</strong> ve <strong>OutputStream</strong> gelmiÅŸti. Fakat bunun bÃ¶yle
olmadÄ±ÄŸÄ±nÄ± api dÃ¶kÃ¼manÄ±nÄ± inceleyince fark ettim. Bu yazÄ±da streamler
nasÄ±l Ã§alÄ±ÅŸÄ±r , tÃ¼rleri nelerdir ve nasÄ±l kullanÄ±lÄ±r sorularÄ±nÄ±
cevaplamaya Ã§alÄ±ÅŸacaÄŸÄ±m.</p>
<p>Stream ler fonksiyonel programlama da kullanÄ±lan <em><strong>Monad</strong></em> tasarÄ±m
kalÄ±plarÄ±na Ã§ok benzemektedir. TÃ¼rkÃ§e kelime anlamÄ± akÄ±ÅŸtÄ±r. Bir dizi
Ã¶ge Ã¼zerinde hesaplamalar yapmak ve farklÄ± tÃ¼rde operasyonlar yapmamÄ±zÄ±
saÄŸlarlar.</p>
<p><strong>NasÄ±l Ã§alÄ±ÅŸÄ±r?</strong></p>
<p>Bir stream aslÄ±nda iki tÃ¼rlÃ¼ iÅŸlem yapar. Bunlar ara iÅŸlemler ve
sonlandÄ±rÄ±cÄ± iÅŸlemlerdir. Ara iÅŸlemler iÅŸlemin sonucunda Stream dÃ¶nerken
sonlandÄ±rÄ±cÄ± iÅŸlemler void yada stream olmayan tÃ¼rde deÄŸer dÃ¶ner.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="err">â€œ</span><span class="n">ali</span><span class="err">â€</span><span class="o">,</span> <span class="err">â€œ</span><span class="n">veli</span><span class="err">â€</span><span class="o">,</span> <span class="err">â€œ</span><span class="n">ahmet</span><span class="err">â€</span><span class="o">,</span><span class="err">â€</span><span class="n">mehmet</span><span class="err">â€</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
<span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="err">â€œ</span><span class="n">a</span><span class="err">â€</span><span class="o">))</span>
<span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">String</span><span class="o">::</span><span class="n">toUpperCase</span><span class="o">)</span>
<span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="nl">
</span><span class="nl">Output:</span><span class="n">ALIAHMET</span>
</code></pre></div><p>Ã–rnek olarak yukarÄ±daki koda baktÄ±ÄŸÄ±mÄ±z zaman bir liste iÃ§erisinde
bulunan ali, veli, ahmet ve mehmet deÄŸerlerini <strong>ara iÅŸlem</strong> olan
<strong>filter</strong> ve <strong>map</strong> methodu ile iÅŸleme alÄ±p <strong>sonlandÄ±rÄ±cÄ± iÅŸlem</strong>olan
<strong>forEach</strong> methoduyla konsola Ã§Ä±ktÄ±larÄ±nÄ± basmaktadÄ±r. Streamâ€™in tÃ¼m
ara ve sonlandÄ±rÄ±cÄ± iÅŸlemlerine
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html" target="_blank" rel="noopener noreffer">buradan</a>
eriÅŸebilirsiniz.</p>
<p><strong>TÃ¼rleri nelerdir?</strong></p>
<p>Streamler ikiye ayrÄ±lÄ±r. Bunlar <strong>stream()</strong> ve <strong>parallelStream()</strong>
dir. <strong>stream()</strong> methodu bir listede bulunan deÄŸerlerin iÅŸleme
alÄ±nmasÄ±nda sÄ±ralÄ± olarak hareket eder. Fakat <strong>parallelStream(</strong>)
methodu ise liste de bulunan deÄŸerleri birbirinden baÄŸÄ±msÄ±z olarak
iÅŸleme alÄ±r. Ã–rnek olarak yukarÄ±da tanÄ±mlamÄ±ÅŸ olduÄŸumuz Ã¶rnek listemizi
<strong>stream()</strong> ve <strong>parallelStream()</strong> methodlarÄ±nÄ± ayrÄ± ayrÄ± kullanarak
Ã§alÄ±ÅŸtÄ±rÄ±rsak <strong>stream()</strong> methodu her zaman bize aÅŸaÄŸÄ±daki sonucu
dÃ¶necektir.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="nl">Output:</span><span class="n">ALIAHMET</span>
</code></pre></div><p>Fakat <strong>parallelStream(</strong>) methodu ise ilk deÄŸer olarak ALI deÄŸerini
Ã¶nce dÃ¶nerken bazende AHMET deÄŸerini Ã¶nce dÃ¶necektir. parallelStream() â€˜
e yazÄ±nÄ±n ilerleyen kÄ±sÄ±mlarÄ±nda daha detaylÄ± deÄŸineceÄŸiz.</p>
<p>YukarÄ±daki Ã¶rnek de bir stream oluÅŸturmak iÃ§in List iÃ§erisindeki
deÄŸerleri .stream() ile iÅŸleme almÄ±ÅŸtÄ±k. AslÄ±nda buna ihtiyaÃ§ duymadan
<strong>Stream.of()</strong> methodu ilede aynÄ± iÅŸlemi gerÃ§ekleÅŸtirebiliriz. Ã–rnek
olarak :</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"> <span class="n">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="err">â€œ</span><span class="n">ali</span><span class="err">â€</span><span class="o">,</span> <span class="err">â€œ</span><span class="n">veli</span><span class="err">â€</span><span class="o">,</span> <span class="err">â€œ</span><span class="n">ahmet</span><span class="err">â€</span><span class="o">,</span><span class="err">â€</span><span class="n">mehmet</span><span class="err">â€â€</span><span class="o">)</span>
 <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="err">â€œ</span><span class="n">a</span><span class="err">â€</span><span class="o">))</span>
 <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">String</span><span class="o">::</span><span class="n">toUpperCase</span><span class="o">)</span>
 <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
 
 <span class="n">Output</span><span class="o">:</span><span class="n">ALIAHMET</span>
</code></pre></div><p>Java 8 ile ayrÄ±ca primitive type lara Ã¶zgÃ¼ stream tÃ¼rleride
bulunmaktadÄ±r. Ã–rneÄŸin int , double ve long primitive tÃ¼rleri iÃ§in
<strong>IntStream</strong> , <strong>DoubleStream</strong> ve <strong>LongStream</strong> tÃ¼rleri
bulunmaktadÄ±r.</p>
<p>IntStreamler for dÃ¶ngÃ¼sÃ¼ yerinede kullanabiliriz. AÅŸaÄŸÄ±daki Ã¶rnek de for
dÃ¶ngÃ¼sÃ¼ ile yapÄ±lan bir iÅŸlemin IntStream ile yapÄ±lmasÄ±nÄ± gÃ¶receÄŸiz.</p>
<p><strong>For dÃ¶ngÃ¼sÃ¼ :</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span> <span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">10</span> <span class="o">;</span> <span class="n">i</span><span class="o">++){</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">i</span><span class="o">);}</span>
<span class="nl">
</span><span class="nl">Output:</span><span class="n">0123456789</span>
</code></pre></div><p><strong>IntStream :</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">10</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">print</span><span class="o">);</span>
<span class="nl">
</span><span class="nl">Output:</span><span class="n">0123456789</span>
</code></pre></div><p>Primitive stream ler aritmetik iÅŸlemler olan <em><strong>sum</strong></em> , <em><strong>average</strong></em> ,
<em><strong>max</strong></em> , <em><strong>min</strong></em> iÅŸlemlerinin kolaylÄ±kla yapÄ±lmasÄ±nÄ± saÄŸlarlar.
Ã–rnek olarak :</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">10</span><span class="o">).</span><span class="na">max</span><span class="o">().</span><span class="na">getAsInt</span><span class="o">());</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">10</span><span class="o">).</span><span class="na">min</span><span class="o">().</span><span class="na">getAsInt</span><span class="o">());</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">10</span><span class="o">).</span><span class="na">sum</span><span class="o">());</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">10</span><span class="o">).</span><span class="na">average</span><span class="o">().</span><span class="na">getAsDouble</span><span class="o">());</span>
<span class="nl">
</span><span class="nl">Output:</span> <span class="n">9</span> <span class="c1">//max0 //min45 //sum4.5 //average
</span></code></pre></div><p>AyrÄ±ca primitive streamler obje dÃ¶nÃ¼ÅŸÃ¼mlerinde de kullanÄ±labilir. Ã–rnek
olarak :</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">3</span><span class="o">).</span><span class="na">mapToObj</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="err">â€œ</span><span class="n">ali</span><span class="err">â€</span><span class="o">+</span><span class="n">i</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="nl">
</span><span class="nl">Output:</span> <span class="n">ali0ali1ali2</span>
</code></pre></div><p>Streamâ€™in ikinci tÃ¼rÃ¼ olan <strong>parallelStream</strong> ise iÅŸleme alÄ±nan
deÄŸerleri sÄ±ralÄ± olarak deÄŸilde birbirlerinden baÄŸÄ±msÄ±z olarak iÅŸleme
alÄ±rlar. Bunu yaparken <em><strong>ForkJoinPool</strong></em> arayÃ¼zÃ¼nÃ¼n saÄŸlamÄ±ÅŸ olduÄŸu
<em><strong>commonPool</strong></em> methodunu kullanÄ±r. Thread pool da default tanÄ±mlÄ± olan
thread adedi kadar olan iÅŸlemleri paralel olarak Ã§alÄ±ÅŸtÄ±rabilir.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="err">â€œ</span><span class="n">ali</span><span class="err">â€</span><span class="o">,</span> <span class="err">â€œ</span><span class="n">veli</span><span class="err">â€</span><span class="o">,</span> <span class="err">â€œ</span><span class="n">ahmet</span><span class="err">â€</span><span class="o">)</span>
<span class="o">.</span><span class="na">parallelStream</span><span class="o">()</span>
<span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="err">â€œ</span><span class="n">Filter</span><span class="o">:</span> <span class="o">%</span><span class="n">s</span> <span class="o">[%</span><span class="n">s</span><span class="o">]</span><span class="err">\</span><span class="n">n</span><span class="err">â€</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span> <span class="o">})</span>
<span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="err">â€œ</span><span class="n">Map</span><span class="o">:</span> <span class="o">%</span><span class="n">s</span> <span class="o">[%</span><span class="n">s</span><span class="o">]</span><span class="err">\</span><span class="n">n</span><span class="err">â€</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span> <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">();</span> <span class="o">})</span>
<span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="err">â€œ</span><span class="n">ForEach</span><span class="o">:</span> <span class="o">%</span><span class="n">s</span> <span class="o">[%</span><span class="n">s</span><span class="o">]</span><span class="err">\</span><span class="n">n</span><span class="err">â€</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()));</span>
<span class="nl">
</span><span class="nl">Output:</span> 
<span class="nl">Filter:</span> <span class="n">ali</span> <span class="o">[</span><span class="n">ForkJoinPool</span><span class="o">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">1</span><span class="o">]</span>
<span class="nl">Map:</span> <span class="n">ali</span> <span class="o">[</span><span class="n">ForkJoinPool</span><span class="o">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">1</span><span class="o">]</span>
<span class="nl">ForEach:</span> <span class="n">ALI</span> <span class="o">[</span><span class="n">ForkJoinPool</span><span class="o">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">1</span><span class="o">]</span>
<span class="nl">Filter:</span> <span class="n">veli</span> <span class="o">[</span><span class="n">main</span><span class="o">]</span>
<span class="nl">Map:</span> <span class="n">veli</span> <span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="n">Filter</span><span class="o">:</span> <span class="n">ahmet</span> <span class="o">[</span><span class="n">ForkJoinPool</span><span class="o">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">2</span><span class="o">]</span>
<span class="nl">Map:</span> <span class="n">ahmet</span> <span class="o">[</span><span class="n">ForkJoinPool</span><span class="o">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">2</span><span class="o">]</span>
<span class="nl">ForEach:</span> <span class="n">AHMET</span> <span class="o">[</span><span class="n">ForkJoinPool</span><span class="o">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">2</span><span class="o">]</span>
<span class="nl">ForEach:</span> <span class="n">VELI</span> <span class="o">[</span><span class="n">main</span><span class="o">]</span>
</code></pre></div><p>YukarÄ±daki Ã¶rnek de <strong>parallelStream</strong> in nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± daha iyi
gÃ¶rebilirsiniz.</p>
<p>Ã–zetle Java programlama dili, Java 8 versiyonunda yayÄ±nlamÄ±ÅŸ olduÄŸu
stream ler ile yazÄ±lan kodlarÄ±n daha kolay okunup , gÃ¼zel gÃ¶rÃ¼nmesinin
yanÄ±nda performans aÃ§Ä±sÄ±ndan da hÄ±zlÄ± olmasÄ±nÄ± saÄŸlamÄ±ÅŸtÄ±r.</p>
<p>Kolay Gelsin.. ğŸ¤</p>
]]></description>
</item></channel>
</rss>
